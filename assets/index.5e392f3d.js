var z=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))Q.call(t,s)&&I(e,s,t[s]);if(j)for(var s of j(t))U.call(t,s)&&I(e,s,t[s]);return e},S=(e,t)=>G(e,J(t));import{v as M,j as P,R as T,c as R,r as p,a as V}from"./vendor.8f23cff8.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}};Z();const g=8,ee=4,F={R1:"\u5175",R2:"\u70AE",R3:"\u508C",R4:"\u4FE5",R5:"\u76F8",R6:"\u4ED5",R7:"\u5E25",B1:"\u5352",B2:"\u7832",B3:"\u99AC",B4:"\u8ECA",B5:"\u8C61",B6:"\u58EB",B7:"\u5C07"},te=[[0,-1],[1,0],[0,1],[-1,0]],se=[[0,-2],[2,0],[0,2],[-2,0]],A=e=>e.substr(0,1),N=e=>Number(e.substr(1,1)),re=e=>[Math.floor(e/8),e%8],ne=(e,t)=>e*g+t,$=(e,t,s)=>{const[c,r]=re(e);console.log("x, y",c,r);const u=(s?se:te).map(m=>{const[h,i]=m;return c+h<0||c+h>=ee||r+i<0||r+i>=g?null:ne(c+h,r+i)});return console.log("temp",u),u.includes(t)},q=(e,t)=>{const s=N(e),c=N(t);return s===2||s===1&&c===7?!0:s>c},oe=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,ce=()=>{let e=Object.keys(F);return e=e.map((t,s)=>({id:M(),type:t,isOpen:!1})),e},D=(e,t)=>{let s=[];for(let c=0;c<e;c++)s.push(S(b({},t),{id:M()}));return s},le=()=>{let e=[];return ce().forEach(s=>{const c=s.type.substr(1,1);c==="7"?e=e.concat(D(1,s)):c==="1"?e=e.concat(D(5,s)):e=e.concat(D(2,s))}),e},H=(e,t)=>{const s=oe(0,t.length-1),[c]=t.splice(s,1);return e.push(c),t.length>0&&H(e,t),e},ae=()=>{const e=le(),t=H([],e);return console.log("eeee",t),t},f=P.exports.jsx,y=P.exports.jsxs;function ue({data:{id:e,type:t,isOpen:s},index:c,clickChess:r,isActive:l}){const u=()=>{r({id:e,type:t,isOpen:s,index:c})},m=t.substr(0,1)==="R";return f("li",{className:R("box",l&&"bg-yellow-200"),onClick:u,children:e?s?f("span",{className:R("chess",m&&"text-red-700 border-red-700"),children:F[t]}):f("span",{className:R("chess","back")}):null})}var ie=T.memo(ue);function fe(){const[e,t]=p.exports.useState({B:0,R:0}),[s,c]=p.exports.useState(null),[r,l]=p.exports.useState(1),[{player1:u,player2:m},h]=p.exports.useState({player1:null,player2:null}),[i,C]=p.exports.useState([]),v=()=>{C(ae()),t({B:0,R:0}),l(1)};p.exports.useEffect(()=>{v(),console.log("start")},[]),p.exports.useEffect(()=>{console.warn("chess",i)},[i]),p.exports.useEffect(()=>{console.log(e),e.B>=16&&(alert("\u7D05\u65B9\u52DD\u5229"),v()),e.R>=16&&(alert("\u9ED1\u65B9\u52DD\u5229"),v())},[e]);const K=({id:n,type:o,isOpen:a,index:d})=>{if(u===null&&Y(o),!a){!s&&X(d);return}let L=W(o);if(!s){if(!L)return;console.log("setting!!!"),c({id:n,type:o,isOpen:a,index:d});return}if(s.id===n){c(null);return}if(console.log("8777777",n),s.id!==n){if(L)return;const B=s.index,x=d,O=N(s.type)===2;if(console.warn("selfIndex",B),console.warn("targetIndex",x),console.log($(B,x),"checkStep"),!$(B,x,O))return;n?(console.log("isBomb",O),console.log(q(s.type,o),"checkCanEat"),q(s.type,o)&&(k(B,x),_(o))):(console.log("no-id"),k(B,x)),l(r*-1),c(null)}},W=n=>{console.log("turn",r);let o=r===1?u:m;const a=A(n);return o===a},k=(n,o)=>{let a=[...i];a[o]=a[n],a[n]={id:"",type:"",isOpen:!0,index:n},C(a),console.warn("temp[targetIndex]",a[o]),console.warn("temp[selfIndex]",a[n])},X=n=>{const o=[...i];o[n]=S(b({},o[n]),{isOpen:!0}),C(o),l(r*-1)},Y=n=>{const o=A(n);console.log(n,33),h(o==="B"?{player1:"B",player2:"R"}:{player1:"R",player2:"B"})},_=n=>{const o=A(n),a=b({},e);o==="B"&&a.B++,o==="R"&&a.R++,t(a)},E=n=>n?n==="B"?"\u9ED1\u65B9":"\u7D05\u65B9":"",w=n=>n?n==="B"?"bg-black":"bg-red-600":"";return y("div",{className:"App h-screen flex justify-center items-center",children:[y("ul",{className:" absolute top-8 text-xl",children:[y("li",{children:["\u73A9\u5BB61:",E(u)]}),y("li",{children:["\u73A9\u5BB62:",E(m)]}),u!==0&&y("li",{className:"flex",children:["\u7576\u524D\u8F2A\u5230 ",r===1?"\u73A9\u5BB61":"\u73A9\u5BB62",f("span",{className:R("dot",w(r===1?u:m))})]})]}),f("div",{className:"flex border line",children:Array.from({length:i.length/g}).map((n,o)=>f("ul",{className:"border-r line",children:Array.from({length:g}).map((a,d)=>f(ie,{clickChess:K,isActive:(s==null?void 0:s.id)===i[o*g+d].id,index:o*g+d,data:i[o*g+d]},"row"+d))},"col"+o))})]})}V.render(f(T.StrictMode,{children:f(fe,{})}),document.getElementById("root"));
